
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module PshellReadline</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>PshellReadline</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/riovine/tools/pshell/python/src/PshellReadline.py">/home/riovine/tools/pshell/python/src/PshellReadline.py</a></font></td></tr></table>
    <p><tt>A&nbsp;Python&nbsp;module&nbsp;to&nbsp;provide&nbsp;readline&nbsp;like&nbsp;user&nbsp;input&nbsp;functionality<br>
&nbsp;<br>
This&nbsp;API&nbsp;implements&nbsp;a&nbsp;readline&nbsp;like&nbsp;functionality&nbsp;for&nbsp;user&nbsp;input.&nbsp;&nbsp;This&nbsp;can<br>
work&nbsp;with&nbsp;any&nbsp;character&nbsp;stream&nbsp;based&nbsp;input/output&nbsp;terminal&nbsp;device,&nbsp;i.e.<br>
keyboard&nbsp;input&nbsp;over&nbsp;a&nbsp;serial&nbsp;tty,&nbsp;or&nbsp;over&nbsp;a&nbsp;TCP/telnet&nbsp;connection.&nbsp;&nbsp;This&nbsp;module<br>
will&nbsp;provide&nbsp;up-arrow&nbsp;command&nbsp;history&nbsp;recall,&nbsp;command&nbsp;line&nbsp;editing,&nbsp;and&nbsp;TAB<br>
completion&nbsp;of&nbsp;registered&nbsp;keywords.<br>
&nbsp;<br>
A&nbsp;complete&nbsp;example&nbsp;of&nbsp;the&nbsp;usage&nbsp;of&nbsp;the&nbsp;API&nbsp;can&nbsp;be&nbsp;found&nbsp;in&nbsp;the&nbsp;included&nbsp;demo<br>
program&nbsp;pshellReadlineDemo.py<br>
&nbsp;<br>
Functions:<br>
&nbsp;<br>
&nbsp;&nbsp;<a href="#-setFileDescriptors">setFileDescriptors</a>()&nbsp;--&nbsp;set&nbsp;the&nbsp;input/output&nbsp;file&nbsp;descriptors<br>
&nbsp;&nbsp;<a href="#-setIdleTimeout">setIdleTimeout</a>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;set&nbsp;the&nbsp;idle&nbsp;session&nbsp;timeout<br>
&nbsp;&nbsp;<a href="#-addTabCompletion">addTabCompletion</a>()&nbsp;&nbsp;&nbsp;--&nbsp;add&nbsp;a&nbsp;keyword&nbsp;to&nbsp;the&nbsp;TAB&nbsp;completion&nbsp;list<br>
&nbsp;&nbsp;<a href="#-setTabStyle">setTabStyle</a>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;sets&nbsp;the&nbsp;tab&nbsp;behavour&nbsp;style&nbsp;("fast"&nbsp;or&nbsp;bash)<br>
&nbsp;&nbsp;<a href="#-getInput">getInput</a>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;get&nbsp;a&nbsp;line&nbsp;of&nbsp;user&nbsp;input&nbsp;from&nbsp;our&nbsp;input&nbsp;file&nbsp;descriptor<br>
&nbsp;&nbsp;<a href="#-writeOutput">writeOutput</a>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;write&nbsp;a&nbsp;string&nbsp;to&nbsp;our&nbsp;output&nbsp;file&nbsp;descriptor<br>
&nbsp;&nbsp;<a href="#-isSubString">isSubString</a>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&nbsp;checks&nbsp;for&nbsp;string1&nbsp;substring&nbsp;of&nbsp;string2&nbsp;at&nbsp;position&nbsp;0<br>
&nbsp;<br>
Integer&nbsp;constants:<br>
&nbsp;<br>
Use&nbsp;for&nbsp;the&nbsp;timeout&nbsp;value&nbsp;when&nbsp;setting&nbsp;the&nbsp;idleSessionTimeout,&nbsp;default=none<br>
&nbsp;<br>
&nbsp;&nbsp;IDLE_TIMEOUT_NONE<br>
&nbsp;&nbsp;ONE_SECOND<br>
&nbsp;&nbsp;ONE_MINUTE<br>
&nbsp;<br>
String&nbsp;constants:<br>
&nbsp;<br>
Valid&nbsp;serial&nbsp;types,&nbsp;TTY&nbsp;is&nbsp;for&nbsp;serial&nbsp;terminal&nbsp;control&nbsp;and&nbsp;defaults&nbsp;to<br>
stdin&nbsp;and&nbsp;stdout,&nbsp;SOCKET&nbsp;uses&nbsp;a&nbsp;serial&nbsp;TCP&nbsp;socket&nbsp;placed&nbsp;in&nbsp;'telnet'<br>
mode&nbsp;for&nbsp;control&nbsp;via&nbsp;a&nbsp;telnet&nbsp;client,&nbsp;default=tty&nbsp;with&nbsp;stdin/stdout<br>
&nbsp;<br>
&nbsp;&nbsp;TTY<br>
&nbsp;&nbsp;SOCKET<br>
&nbsp;<br>
Valid&nbsp;TAB&nbsp;style&nbsp;identifiers<br>
&nbsp;<br>
Standard&nbsp;bash/readline&nbsp;tabbing&nbsp;method,&nbsp;i.e.&nbsp;initiate&nbsp;via&nbsp;double&nbsp;tabbing<br>
&nbsp;<br>
&nbsp;&nbsp;BASH_TAB<br>
&nbsp;<br>
Fast&nbsp;tabbing,&nbsp;i.e.&nbsp;initiated&nbsp;via&nbsp;single&nbsp;tabbing,&nbsp;this&nbsp;is&nbsp;the&nbsp;default<br>
&nbsp;<br>
&nbsp;&nbsp;FAST_TAB</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="os.html">os</a><br>
<a href="select.html">select</a><br>
</td><td width="25%" valign=top><a href="signal.html">signal</a><br>
<a href="sys.html">sys</a><br>
</td><td width="25%" valign=top><a href="termios.html">termios</a><br>
<a href="tty.html">tty</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-addTabCompletion"><strong>addTabCompletion</strong></a>(keyword)</dt><dd><tt>Add&nbsp;a&nbsp;keyword&nbsp;to&nbsp;the&nbsp;TAB&nbsp;completion&nbsp;list.&nbsp;&nbsp;TAB&nbsp;completion&nbsp;will&nbsp;only&nbsp;be&nbsp;applied<br>
to&nbsp;the&nbsp;first&nbsp;keyword&nbsp;of&nbsp;a&nbsp;given&nbsp;user&nbsp;typed&nbsp;command<br>
&nbsp;<br>
&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keyword&nbsp;(str)&nbsp;:&nbsp;The&nbsp;keyword&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;TAB&nbsp;completion&nbsp;list<br>
&nbsp;<br>
&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</tt></dd></dl>
 <dl><dt><a name="-getInput"><strong>getInput</strong></a>(prompt)</dt><dd><tt>Issue&nbsp;the&nbsp;user&nbsp;prompt&nbsp;and&nbsp;return&nbsp;the&nbsp;entered&nbsp;command&nbsp;line&nbsp;value.&nbsp;&nbsp;This<br>
function&nbsp;will&nbsp;return&nbsp;the&nbsp;tuple&nbsp;(command,&nbsp;idleSession).&nbsp;&nbsp;If&nbsp;the&nbsp;idle&nbsp;session<br>
timeout&nbsp;is&nbsp;set&nbsp;to&nbsp;IDLE_TIMEOUT_NONE&nbsp;(default),&nbsp;the&nbsp;idleSession&nbsp;will&nbsp;always<br>
be&nbsp;false&nbsp;and&nbsp;this&nbsp;function&nbsp;will&nbsp;not&nbsp;return&nbsp;until&nbsp;the&nbsp;user&nbsp;has&nbsp;typed&nbsp;a&nbsp;command<br>
and&nbsp;pressed&nbsp;return.&nbsp;&nbsp;Otherwise&nbsp;this&nbsp;function&nbsp;will&nbsp;set&nbsp;the&nbsp;idleSession&nbsp;value<br>
to&nbsp;true&nbsp;and&nbsp;return&nbsp;if&nbsp;no&nbsp;user&nbsp;activity&nbsp;is&nbsp;detected&nbsp;for&nbsp;the&nbsp;idleSessionTimeout<br>
period<br>
&nbsp;<br>
&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prompt&nbsp;(str)&nbsp;:&nbsp;The&nbsp;user&nbsp;prompt&nbsp;to&nbsp;display<br>
&nbsp;<br>
&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;&nbsp;:&nbsp;The&nbsp;user&nbsp;typed&nbsp;command<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;:&nbsp;True&nbsp;for&nbsp;idleSession&nbsp;timeout,&nbsp;False&nbsp;otherwise</tt></dd></dl>
 <dl><dt><a name="-isSubString"><strong>isSubString</strong></a>(string1, string2, minMatchLength<font color="#909090">=0</font>)</dt><dd><tt>This&nbsp;function&nbsp;will&nbsp;return&nbsp;True&nbsp;if&nbsp;string1&nbsp;is&nbsp;a&nbsp;substring&nbsp;of&nbsp;string2&nbsp;at<br>
position&nbsp;0.&nbsp;&nbsp;If&nbsp;the&nbsp;minMatchLength&nbsp;is&nbsp;0,&nbsp;then&nbsp;it&nbsp;will&nbsp;compare&nbsp;up&nbsp;to&nbsp;the<br>
length&nbsp;of&nbsp;string1.&nbsp;&nbsp;If&nbsp;the&nbsp;minMatchLength&nbsp;&gt;&nbsp;0,&nbsp;it&nbsp;will&nbsp;require&nbsp;a&nbsp;minimum<br>
of&nbsp;that&nbsp;many&nbsp;characters&nbsp;to&nbsp;match.&nbsp;&nbsp;A&nbsp;string&nbsp;that&nbsp;is&nbsp;longer&nbsp;than&nbsp;the&nbsp;min<br>
match&nbsp;length&nbsp;must&nbsp;still&nbsp;match&nbsp;for&nbsp;the&nbsp;remaining&nbsp;characters,&nbsp;e.g.&nbsp;with&nbsp;a<br>
minMatchLength&nbsp;of&nbsp;2,&nbsp;'q'&nbsp;will&nbsp;not&nbsp;match&nbsp;'quit',&nbsp;but&nbsp;'qu',&nbsp;'qui'&nbsp;or&nbsp;'quit'<br>
will&nbsp;match,&nbsp;'quix'&nbsp;or&nbsp;'uit'&nbsp;will&nbsp;not&nbsp;match.&nbsp;&nbsp;This&nbsp;function&nbsp;is&nbsp;useful&nbsp;for<br>
wildcard&nbsp;matching.<br>
&nbsp;<br>
&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string1&nbsp;(str)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;The&nbsp;substring<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string2&nbsp;(str)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;The&nbsp;target&nbsp;string<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minMatchLength&nbsp;(int)&nbsp;:&nbsp;The&nbsp;minimum&nbsp;required&nbsp;characters&nbsp;match<br>
&nbsp;<br>
&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool&nbsp;:&nbsp;True&nbsp;if&nbsp;substring&nbsp;matches,&nbsp;False&nbsp;otherwise</tt></dd></dl>
 <dl><dt><a name="-setFileDescriptors"><strong>setFileDescriptors</strong></a>(inFd, outFd, serialType, idleTimeout<font color="#909090">=0</font>)</dt><dd><tt>Set&nbsp;the&nbsp;input&nbsp;and&nbsp;output&nbsp;file&nbsp;descriptors,&nbsp;if&nbsp;this&nbsp;function&nbsp;is&nbsp;not&nbsp;called,<br>
the&nbsp;default&nbsp;is&nbsp;stdin&nbsp;and&nbsp;stdout.&nbsp;&nbsp;The&nbsp;file&nbsp;descriptors&nbsp;given&nbsp;to&nbsp;this&nbsp;function<br>
must&nbsp;be&nbsp;opened&nbsp;and&nbsp;running&nbsp;in&nbsp;raw&nbsp;serial&nbsp;character&nbsp;mode.&nbsp;&nbsp;The&nbsp;idleTimeout<br>
specifies&nbsp;the&nbsp;time&nbsp;to&nbsp;wait&nbsp;for&nbsp;any&nbsp;user&nbsp;activity&nbsp;in&nbsp;the&nbsp;getInput&nbsp;function.<br>
Use&nbsp;the&nbsp;identifiers&nbsp;PshellReadline.ONE_SECOND&nbsp;and&nbsp;PshellReadline.ONE_MINUTE<br>
to&nbsp;set&nbsp;this&nbsp;timeout&nbsp;value,&nbsp;e.g.&nbsp;PshellReadline.ONE_MINUTE*5,&nbsp;for&nbsp;serialType<br>
use&nbsp;the&nbsp;identifiers&nbsp;PshellReadline.TTY&nbsp;and&nbsp;PshellReadline.SOCKET.&nbsp;&nbsp;For&nbsp;the<br>
socket&nbsp;identifier,&nbsp;use&nbsp;the&nbsp;file&nbsp;descriptor&nbsp;that&nbsp;is&nbsp;returned&nbsp;from&nbsp;the&nbsp;TCP<br>
socket&nbsp;server&nbsp;'accept'&nbsp;call&nbsp;for&nbsp;both&nbsp;the&nbsp;inFd&nbsp;and&nbsp;outFd.<br>
&nbsp;<br>
&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inFd&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;The&nbsp;input&nbsp;file&nbsp;descriptor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outFd&nbsp;(int)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;The&nbsp;output&nbsp;file&nbsp;descriptor<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;serialType&nbsp;(str)&nbsp;&nbsp;:&nbsp;The&nbsp;serial&nbsp;type&nbsp;(TTY&nbsp;or&nbsp;SOCKET)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idleTimeout&nbsp;(int)&nbsp;:&nbsp;The&nbsp;idle&nbsp;session&nbsp;timeout<br>
&nbsp;<br>
&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</tt></dd></dl>
 <dl><dt><a name="-setIdleTimeout"><strong>setIdleTimeout</strong></a>(idleTimeout)</dt><dd><tt>Set&nbsp;the&nbsp;idle&nbsp;session&nbsp;timeout&nbsp;as&nbsp;described&nbsp;above.&nbsp;&nbsp;Use&nbsp;the&nbsp;identifiers<br>
PshellReadline.ONE_SEC&nbsp;and&nbsp;PshellRedline.ONE_MINUTE&nbsp;as&nbsp;follows,<br>
e.g.&nbsp;PshellReadline.ONE_MINUTE*5&nbsp;for&nbsp;a&nbsp;5&nbsp;minute&nbsp;idleSession&nbsp;timeout.<br>
&nbsp;<br>
&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idleTimeout&nbsp;(int)&nbsp;:&nbsp;The&nbsp;idle&nbsp;session&nbsp;timeout<br>
&nbsp;<br>
&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</tt></dd></dl>
 <dl><dt><a name="-setTabStyle"><strong>setTabStyle</strong></a>(tabStyle)</dt><dd><tt>Set&nbsp;the&nbsp;tabbing&nbsp;method&nbsp;to&nbsp;either&nbsp;be&nbsp;bash/readline&nbsp;style&nbsp;tabbing,&nbsp;i.e.&nbsp;double<br>
tabbing&nbsp;to&nbsp;initiate&nbsp;and&nbsp;display&nbsp;completions,&nbsp;or&nbsp;"fast"&nbsp;tabbing,&nbsp;where&nbsp;all<br>
completions&nbsp;and&nbsp;displays&nbsp;are&nbsp;initiated&nbsp;via&nbsp;a&nbsp;single&nbsp;tab&nbsp;only,&nbsp;the&nbsp;default&nbsp;is<br>
"fast"&nbsp;tabbing,&nbsp;use&nbsp;the&nbsp;identifiers&nbsp;PshellReadline.BASH_TAB&nbsp;and<br>
PshellReadline.FAST_TAB&nbsp;for&nbsp;the&nbsp;tabStyle<br>
&nbsp;<br>
&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tabStyle&nbsp;(str)&nbsp;:&nbsp;The&nbsp;desired&nbsp;TAB&nbsp;&nbsp;behavour&nbsp;style&nbsp;(FAST&nbsp;or&nbsp;BASH)<br>
&nbsp;<br>
&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</tt></dd></dl>
 <dl><dt><a name="-writeOutput"><strong>writeOutput</strong></a>(string)</dt><dd><tt>Write&nbsp;a&nbsp;string&nbsp;to&nbsp;our&nbsp;output&nbsp;file&nbsp;descriptor<br>
&nbsp;<br>
&nbsp;&nbsp;Args:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;string&nbsp;(str)&nbsp;:&nbsp;The&nbsp;string&nbsp;to&nbsp;write&nbsp;to&nbsp;the&nbsp;out&nbsp;file&nbsp;descriptor<br>
&nbsp;<br>
&nbsp;&nbsp;Returns:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;none</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>BASH_TAB</strong> = 'bash'<br>
<strong>FAST_TAB</strong> = 'fast'<br>
<strong>IDLE_TIMEOUT_NONE</strong> = 0<br>
<strong>ONE_MINUTE</strong> = 60<br>
<strong>ONE_SECOND</strong> = 1<br>
<strong>SOCKET</strong> = 'socket'<br>
<strong>TTY</strong> = 'tty'</td></tr></table>
</body></html>